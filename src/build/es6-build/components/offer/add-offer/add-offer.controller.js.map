{"version":3,"sources":["../../../../../app/components/offer/add-offer/add-offer.controller.js"],"names":["angular","module","controller","AddOfferController","OfferService","Functions","$scope","$timeout","$location","vm","_fs","newOffer","addOffer","setFile","element","currentFile","files","reader","FileReader","onload","event","image_source","target","result","$apply","readAsDataURL","then","console","log","toast","success","name"],"mappings":";;AAAA,CAAC,YAAM;AACN;;AAEAA,SACGC,MADH,CACU,sBADV,EACkC,EADlC,EAEGC,UAFH,CAEc,oBAFd,EAEoCC,kBAFpC;;AAIA,UAASA,kBAAT,CAA4BC,YAA5B,EAA0CC,SAA1C,EAAqDC,MAArD,EAA6DC,QAA7D,EAAuEC,SAAvE,EAAkF;AACjF,MAAIC,KAAO,IAAX;AACA,OAAKC,GAAL,GAAWL,SAAX;;AAEA;AACAI,KAAGE,QAAH;;AAEA;AACAF,KAAGG,QAAH,GAAiBA,QAAjB;AACAN,SAAOO,OAAP,GAAiBA,OAAjB;;AAEA;;;;AAIA,WAASA,OAAT,CAAiBC,OAAjB,EAA0B;AACzBL,MAAGM,WAAH,GAAiBD,QAAQE,KAAR,CAAc,CAAd,CAAjB,CADyB,CACU;AACnC,OAAIC,SAAa,IAAIC,UAAJ,EAAjB;AACA;AACAD,UAAOE,MAAP,GAAiB,UAASC,KAAT,EAAgB;AAChCX,OAAGY,YAAH,GAAkBD,MAAME,MAAN,CAAaC,MAA/B;AACAjB,WAAOkB,MAAP;AACA,IAHD;AAIAP,UAAOQ,aAAP,CAAqBX,QAAQE,KAAR,CAAc,CAAd,CAArB,EARyB,CAQe;AACxC;;AAED;;;;AAIA,WAASJ,QAAT,GAAoB;AACnBR,gBAAaQ,QAAb,CAAsBH,GAAGE,QAAzB,EACGe,IADH,CACQC,QAAQC,GAAR,CAAYnB,GAAGE,QAAf,CADR,EAEGe,IAFH,CAEQ,KAAKhB,GAAL,CAASmB,KAAT,GAAiBC,OAAjB,sBAA4CrB,GAAGE,QAAH,CAAYoB,IAAxD,CAFR,EAGGL,IAHH,CAGQjB,GAAGE,QAAH,GAAc,EAHtB;AAIA;AAED;AACD,CA7CD","file":"add-offer.controller.js","sourcesContent":["(() => {\r\n\t\"use strict\";\r\n\r\n\tangular\r\n\t\t\t.module(\"add-offer.controller\", [])\r\n\t\t\t.controller(\"AddOfferController\", AddOfferController);\r\n\r\n\tfunction AddOfferController(OfferService, Functions, $scope, $timeout, $location) {\r\n\t\tlet vm   = this;\r\n\t\tthis._fs = Functions;\r\n\r\n\t\t// viewmodel variables\r\n\t\tvm.newOffer;\r\n\r\n\t\t// functions\r\n\t\tvm.addOffer    = addOffer;\r\n\t\t$scope.setFile = setFile;\r\n\r\n\t\t/**\r\n\t\t * set file to preview uploaded img\r\n\t\t * @param element\r\n\t\t */\r\n\t\tfunction setFile(element) {\r\n\t\t\tvm.currentFile = element.files[0]; // set uploaded img as currentFile\r\n\t\t\tlet reader     = new FileReader();\r\n\t\t\t// triggerd when file is read\r\n\t\t\treader.onload  = function(event) {\r\n\t\t\t\tvm.image_source = event.target.result;\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t}\r\n\t\t\treader.readAsDataURL(element.files[0]); // when the file is read, it triggers the onload event above.\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * add an offer to the database\r\n\t\t * @trigger (ng-submit)\r\n\t\t */\r\n\t\tfunction addOffer() {\r\n\t\t\tOfferService.addOffer(vm.newOffer)\r\n\t\t\t\t\t.then(console.log(vm.newOffer))\r\n\t\t\t\t\t.then(this._fs.toast().success(`Added new offer ${vm.newOffer.name}`))\r\n\t\t\t\t\t.then(vm.newOffer = {});\r\n\t\t}\r\n\r\n\t}\r\n})();\r\n"]}