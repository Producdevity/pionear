{"version":3,"sources":["../../../../../app/components/offer/add-offer/add-offer.controller.js"],"names":["angular","module","controller","AddOfferController","OfferService","Functions","Share","$scope","$timeout","$location","vm","_fs","newOffer","optionalDescription","headerDescription","addOffer","setFile","element","currentFile","files","reader","FileReader","onload","event","image_source","target","result","$apply","readAsDataURL","then","console","log","toast","success","name"],"mappings":";;AAAA,CAAC,YAAM;AACN;;AAEAA,UACGC,MADH,CACU,sBADV,EACkC,EADlC,EAEGC,UAFH,CAEc,oBAFd,EAEoCC,kBAFpC;;AAIA,WAASA,kBAAT,CAA4BC,YAA5B,EAA0CC,SAA1C,EAAqDC,KAArD,EAA4DC,MAA5D,EAAoEC,QAApE,EAA8EC,SAA9E,EAAyF;AACxF,QAAIC,KAAO,IAAX;AACA,SAAKC,GAAL,GAAWN,SAAX;;AAEA;AACAK,OAAGE,QAAH;;AAEAF,OAAGG,mBAAH,GAAyBP,MAAMQ,iBAAN,GAA0B,KAAnD;;AAEA;AACAJ,OAAGK,QAAH,GAAiBA,QAAjB;AACAR,WAAOS,OAAP,GAAiBA,OAAjB;;AAEA;;;;AAIA,aAASA,OAAT,CAAiBC,OAAjB,EAA0B;AACzBP,SAAGQ,WAAH,GAAiBD,QAAQE,KAAR,CAAc,CAAd,CAAjB,CADyB,CACU;AACnC,UAAIC,SAAa,IAAIC,UAAJ,EAAjB;AACA;AACAD,aAAOE,MAAP,GAAiB,UAASC,KAAT,EAAgB;AAChCb,WAAGc,YAAH,GAAkBD,MAAME,MAAN,CAAaC,MAA/B;AACAnB,eAAOoB,MAAP;AACA,OAHD;AAIAP,aAAOQ,aAAP,CAAqBX,QAAQE,KAAR,CAAc,CAAd,CAArB,EARyB,CAQe;AACxC;;AAED;;;;AAIA,aAASJ,QAAT,GAAoB;AACnBX,mBAAaW,QAAb,CAAsBL,GAAGE,QAAzB,EACGiB,IADH,CACQC,QAAQC,GAAR,CAAYrB,GAAGE,QAAf,CADR,EAEGiB,IAFH,CAEQ,KAAKlB,GAAL,CAASqB,KAAT,GAAiBC,OAAjB,sBAA4CvB,GAAGE,QAAH,CAAYsB,IAAxD,CAFR,EAGGL,IAHH,CAGQnB,GAAGE,QAAH,GAAc,EAHtB;AAIA;AAED;AACD,CA/CD","file":"add-offer.controller.js","sourcesContent":["(() => {\r\n\t\"use strict\";\r\n\r\n\tangular\r\n\t\t\t.module(\"add-offer.controller\", [])\r\n\t\t\t.controller(\"AddOfferController\", AddOfferController);\r\n\r\n\tfunction AddOfferController(OfferService, Functions, Share, $scope, $timeout, $location) {\r\n\t\tlet vm   = this;\r\n\t\tthis._fs = Functions;\r\n\r\n\t\t// viewmodel variables\r\n\t\tvm.newOffer;\r\n\r\n\t\tvm.optionalDescription = Share.headerDescription = 'add';\r\n\r\n\t\t// functions\r\n\t\tvm.addOffer    = addOffer;\r\n\t\t$scope.setFile = setFile;\r\n\r\n\t\t/**\r\n\t\t * set file to preview uploaded img\r\n\t\t * @param element\r\n\t\t */\r\n\t\tfunction setFile(element) {\r\n\t\t\tvm.currentFile = element.files[0]; // set uploaded img as currentFile\r\n\t\t\tlet reader     = new FileReader();\r\n\t\t\t// triggerd when file is read\r\n\t\t\treader.onload  = function(event) {\r\n\t\t\t\tvm.image_source = event.target.result;\r\n\t\t\t\t$scope.$apply();\r\n\t\t\t}\r\n\t\t\treader.readAsDataURL(element.files[0]); // when the file is read, it triggers the onload event above.\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * add an offer to the database\r\n\t\t * @trigger (ng-submit)\r\n\t\t */\r\n\t\tfunction addOffer() {\r\n\t\t\tOfferService.addOffer(vm.newOffer)\r\n\t\t\t\t\t.then(console.log(vm.newOffer))\r\n\t\t\t\t\t.then(this._fs.toast().success(`Added new offer ${vm.newOffer.name}`))\r\n\t\t\t\t\t.then(vm.newOffer = {});\r\n\t\t}\r\n\r\n\t}\r\n})();\r\n"]}