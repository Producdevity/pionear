{"version":3,"sources":["../../app/config.js"],"names":["angular","module","config","run","$firebaseRefProvider","console","log","CONFIG","apiKey","authDomain","databaseURL","storageBucket","messagingSenderId","firebase","initializeApp","registerUrl","default","users","Auth","$rootScope","$location","$state","checkAuth","$on","next","current","event","toState","toParams","fromState","fromParams","error","go","$onAuthStateChanged","user","path"],"mappings":";;AAAA,CAAC,YAAM;AACN;;AAEAA,SACGC,MADH,CACU,OADV,EAEGC,MAFH,CAEUA,MAFV,EAGGC,GAHH,CAGOA,GAHP;;AAKA,UAASD,MAAT,CAAgBE,oBAAhB,EAAsC;AACrCC,UAAQC,GAAR,CAAY,yBAAZ;;AAEA;AACA,MAAMC,SAAS;AACdC,WAAmB,yCADL;AAEdC,eAAmB,+BAFL;AAGdC,gBAAmB,sCAHL;AAIdC,kBAAmB,2BAJL;AAKdC,sBAAmB;AALL,GAAf;AAOAC,WAASC,aAAT,CAAuBP,MAAvB;;AAEAH,uBAAqBW,WAArB,CAAiC;AAChCC,YAAST,OAAOG,WADgB;AAEhCO,UAAYV,OAAOG,WAAnB;AAFgC,GAAjC;AAKA;;AAED,UAASP,GAAT,CAAae,IAAb,EAAmBC,UAAnB,EAA+BC,SAA/B,EAA0CC,MAA1C,EAAkD;AACjDhB,UAAQC,GAAR,CAAY,sBAAZ;AACAgB;;AAEAH,aAAWI,GAAX,CAAe,mBAAf,EAAoC,UAACC,IAAD,EAAOC,OAAP,EAAmB;AACtDH;AACA,GAFD;;AAIAH,aAAWI,GAAX,CAAe,mBAAf,EAAoC,UAASG,KAAT,EAAgBC,OAAhB,EAAyBC,QAAzB,EAAmCC,SAAnC,EAA8CC,UAA9C,EAA0DC,KAA1D,EAAiE;AACpG;AACA;AACA,OAAGA,UAAU,eAAb,EAA8B;AAC7BV,WAAOW,EAAP,CAAU,MAAV;AACA;AACD,GAND;;AAQA,WAASV,SAAT,GAAqB;AACpBJ,QAAKe,mBAAL,CAAyB,gBAAQ;AAChC,QAAG,CAACC,IAAJ,EAAUd,UAAUe,IAAV,CAAe,eAAf;AACV9B,YAAQC,GAAR,CAAY4B,IAAZ;AACA,IAHD;AAIA;AAED;AAED,CArDD","file":"config.js","sourcesContent":["(() => {\r\n\t'use strict';\r\n\r\n\tangular\r\n\t\t\t.module(\"myApp\")\r\n\t\t\t.config(config)\r\n\t\t\t.run(run)\r\n\r\n\tfunction config($firebaseRefProvider) {\r\n\t\tconsole.log('config function started');\r\n\r\n\t\t// Initialize Firebase\r\n\t\tconst CONFIG = {\r\n\t\t\tapiKey:            \"AIzaSyDsp_oBM8lPOnEGVnByjsofGw7Kpftzfe8\",\r\n\t\t\tauthDomain:        \"pionear-d070e.firebaseapp.com\",\r\n\t\t\tdatabaseURL:       \"https://pionear-d070e.firebaseio.com\",\r\n\t\t\tstorageBucket:     \"pionear-d070e.appspot.com\",\r\n\t\t\tmessagingSenderId: \"96740586251\"\r\n\t\t};\r\n\t\tfirebase.initializeApp(CONFIG);\r\n\r\n\t\t$firebaseRefProvider.registerUrl({\r\n\t\t\tdefault: CONFIG.databaseURL,\r\n\t\t\tusers:   `${CONFIG.databaseURL}/users`\r\n\t\t});\r\n\r\n\t}\r\n\r\n\tfunction run(Auth, $rootScope, $location, $state) {\r\n\t\tconsole.log('run function started');\r\n\t\tcheckAuth();\r\n\r\n\t\t$rootScope.$on('$routeChangeStart', (next, current) => {\r\n\t\t\tcheckAuth();\r\n\t\t});\r\n\r\n\t\t$rootScope.$on(\"$stateChangeError\", function(event, toState, toParams, fromState, fromParams, error) {\r\n\t\t\t// We can catch the error thrown when the $requireSignIn promise is rejected\r\n\t\t\t// and redirect the user back to the home page\r\n\t\t\tif(error === \"AUTH_REQUIRED\") {\r\n\t\t\t\t$state.go(\"home\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tfunction checkAuth() {\r\n\t\t\tAuth.$onAuthStateChanged(user => {\r\n\t\t\t\tif(!user) $location.path('/auth/sign-in');\r\n\t\t\t\tconsole.log(user);\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t};\r\n\r\n})();"]}